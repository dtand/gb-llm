/**
 * @file    sprites.c
 * @brief   Tile data and initialization for RPG Battle Demo
 * @game    rpg
 * 
 * Contains all graphical tile data for backgrounds and sprites.
 */

#include <gb/gb.h>
#include <stdint.h>
#include "sprites.h"

// ============================================================
// BACKGROUND TILES
// ============================================================

/** Empty tile */
const uint8_t empty_tile[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

/** Box border tiles for menus */
const uint8_t border_tl_tile[] = {  // Top-left corner
    0xFF, 0xFF, 0x80, 0xFF, 0x80, 0xBF, 0x80, 0xBF,
    0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF
};

const uint8_t border_t_tile[] = {   // Top edge
    0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const uint8_t border_tr_tile[] = {  // Top-right corner
    0xFF, 0xFF, 0x01, 0xFF, 0x01, 0xFD, 0x01, 0xFD,
    0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD
};

const uint8_t border_l_tile[] = {   // Left edge
    0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF,
    0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF
};

const uint8_t border_r_tile[] = {   // Right edge
    0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD,
    0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD
};

const uint8_t border_bl_tile[] = {  // Bottom-left corner
    0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF, 0x80, 0xBF,
    0x80, 0xBF, 0x80, 0xBF, 0x80, 0xFF, 0xFF, 0xFF
};

const uint8_t border_b_tile[] = {   // Bottom edge
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF
};

const uint8_t border_br_tile[] = {  // Bottom-right corner
    0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFD,
    0x01, 0xFD, 0x01, 0xFD, 0x01, 0xFF, 0xFF, 0xFF
};

const uint8_t fill_tile[] = {       // Box fill (light)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

/** Digit tiles 0-9 */
const uint8_t digit_tiles[] = {
    // 0
    0x3C, 0x3C, 0x66, 0x66, 0x6E, 0x6E, 0x76, 0x76,
    0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // 1
    0x18, 0x18, 0x38, 0x38, 0x18, 0x18, 0x18, 0x18,
    0x18, 0x18, 0x18, 0x18, 0x7E, 0x7E, 0x00, 0x00,
    // 2
    0x3C, 0x3C, 0x66, 0x66, 0x06, 0x06, 0x1C, 0x1C,
    0x30, 0x30, 0x60, 0x60, 0x7E, 0x7E, 0x00, 0x00,
    // 3
    0x3C, 0x3C, 0x66, 0x66, 0x06, 0x06, 0x1C, 0x1C,
    0x06, 0x06, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // 4
    0x0C, 0x0C, 0x1C, 0x1C, 0x3C, 0x3C, 0x6C, 0x6C,
    0x7E, 0x7E, 0x0C, 0x0C, 0x0C, 0x0C, 0x00, 0x00,
    // 5
    0x7E, 0x7E, 0x60, 0x60, 0x7C, 0x7C, 0x06, 0x06,
    0x06, 0x06, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // 6
    0x1C, 0x1C, 0x30, 0x30, 0x60, 0x60, 0x7C, 0x7C,
    0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // 7
    0x7E, 0x7E, 0x06, 0x06, 0x0C, 0x0C, 0x18, 0x18,
    0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x00, 0x00,
    // 8
    0x3C, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C,
    0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // 9
    0x3C, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x3E, 0x3E,
    0x06, 0x06, 0x0C, 0x0C, 0x38, 0x38, 0x00, 0x00
};

/** Letter tiles A-Z */
const uint8_t letter_tiles[] = {
    // A
    0x18, 0x18, 0x3C, 0x3C, 0x66, 0x66, 0x66, 0x66,
    0x7E, 0x7E, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00,
    // B
    0x7C, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x7C,
    0x66, 0x66, 0x66, 0x66, 0x7C, 0x7C, 0x00, 0x00,
    // C
    0x3C, 0x3C, 0x66, 0x66, 0x60, 0x60, 0x60, 0x60,
    0x60, 0x60, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // D
    0x78, 0x78, 0x6C, 0x6C, 0x66, 0x66, 0x66, 0x66,
    0x66, 0x66, 0x6C, 0x6C, 0x78, 0x78, 0x00, 0x00,
    // E
    0x7E, 0x7E, 0x60, 0x60, 0x60, 0x60, 0x78, 0x78,
    0x60, 0x60, 0x60, 0x60, 0x7E, 0x7E, 0x00, 0x00,
    // F
    0x7E, 0x7E, 0x60, 0x60, 0x60, 0x60, 0x78, 0x78,
    0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x00, 0x00,
    // G
    0x3C, 0x3C, 0x66, 0x66, 0x60, 0x60, 0x6E, 0x6E,
    0x66, 0x66, 0x66, 0x66, 0x3E, 0x3E, 0x00, 0x00,
    // H
    0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x7E, 0x7E,
    0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00,
    // I
    0x7E, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
    0x18, 0x18, 0x18, 0x18, 0x7E, 0x7E, 0x00, 0x00,
    // J
    0x3E, 0x3E, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,
    0x0C, 0x0C, 0x6C, 0x6C, 0x38, 0x38, 0x00, 0x00,
    // K
    0x66, 0x66, 0x6C, 0x6C, 0x78, 0x78, 0x70, 0x70,
    0x78, 0x78, 0x6C, 0x6C, 0x66, 0x66, 0x00, 0x00,
    // L
    0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60,
    0x60, 0x60, 0x60, 0x60, 0x7E, 0x7E, 0x00, 0x00,
    // M
    0x63, 0x63, 0x77, 0x77, 0x7F, 0x7F, 0x6B, 0x6B,
    0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00,
    // N
    0x66, 0x66, 0x76, 0x76, 0x7E, 0x7E, 0x7E, 0x7E,
    0x6E, 0x6E, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00,
    // O
    0x3C, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
    0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // P
    0x7C, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x7C,
    0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x00, 0x00,
    // Q
    0x3C, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
    0x6A, 0x6A, 0x6C, 0x6C, 0x36, 0x36, 0x00, 0x00,
    // R
    0x7C, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x7C,
    0x6C, 0x6C, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00,
    // S
    0x3C, 0x3C, 0x66, 0x66, 0x60, 0x60, 0x3C, 0x3C,
    0x06, 0x06, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // T
    0x7E, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
    0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00,
    // U
    0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
    0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00,
    // V
    0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
    0x66, 0x66, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x00,
    // W
    0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x6B, 0x6B,
    0x7F, 0x7F, 0x77, 0x77, 0x63, 0x63, 0x00, 0x00,
    // X
    0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C, 0x18, 0x18,
    0x3C, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00,
    // Y
    0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C,
    0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00,
    // Z
    0x7E, 0x7E, 0x06, 0x06, 0x0C, 0x0C, 0x18, 0x18,
    0x30, 0x30, 0x60, 0x60, 0x7E, 0x7E, 0x00, 0x00
};

/** Colon */
const uint8_t colon_tile[] = {
    0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00,
    0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00
};

/** Slash */
const uint8_t slash_tile[] = {
    0x06, 0x06, 0x06, 0x06, 0x0C, 0x0C, 0x18, 0x18,
    0x30, 0x30, 0x60, 0x60, 0x60, 0x60, 0x00, 0x00
};

/** Menu cursor arrow */
const uint8_t arrow_tile[] = {
    0x00, 0x00, 0x40, 0x40, 0x60, 0x60, 0x70, 0x70,
    0x78, 0x78, 0x70, 0x70, 0x60, 0x60, 0x40, 0x40
};

/** HP bar full segment */
const uint8_t hp_full_tile[] = {
    0x00, 0x00, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E,
    0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x00, 0x00
};

/** HP bar empty segment */
const uint8_t hp_empty_tile[] = {
    0x00, 0x00, 0x7E, 0x42, 0x42, 0x42, 0x42, 0x42,
    0x42, 0x42, 0x42, 0x42, 0x7E, 0x42, 0x00, 0x00
};

/** MP bar full segment (different pattern) */
const uint8_t mp_full_tile[] = {
    0x00, 0x00, 0x7E, 0x7E, 0x5A, 0x5A, 0x5A, 0x5A,
    0x5A, 0x5A, 0x5A, 0x5A, 0x7E, 0x7E, 0x00, 0x00
};

/** MP bar empty segment */
const uint8_t mp_empty_tile[] = {
    0x00, 0x00, 0x7E, 0x42, 0x42, 0x42, 0x42, 0x42,
    0x42, 0x42, 0x42, 0x42, 0x7E, 0x42, 0x00, 0x00
};

/** Exclamation mark */
const uint8_t exclam_tile[] = {
    0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
    0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00
};

// ============================================================
// MONSTER TILES (32x32 = 16 tiles, 4x4 grid)
// A simple slime/blob monster
// ============================================================

const uint8_t monster_tiles[] = {
    // Row 0: Top of monster
    // Tile 0 (top-left)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x03, 0x03, 0x0F, 0x0F, 0x1F, 0x1F, 0x3F, 0x3F,
    // Tile 1
    0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x1F, 0x1F,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    // Tile 2
    0x00, 0x00, 0x00, 0x00, 0xE0, 0xE0, 0xF8, 0xF8,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    // Tile 3 (top-right)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xC0, 0xC0, 0xF0, 0xF0, 0xF8, 0xF8, 0xFC, 0xFC,
    
    // Row 1: Eyes area
    // Tile 4
    0x3F, 0x3F, 0x7F, 0x7F, 0x7F, 0x7F, 0x7F, 0x7F,
    0x7F, 0x7F, 0x7F, 0x7F, 0x7F, 0x7F, 0x3F, 0x3F,
    // Tile 5 (left eye)
    0xFF, 0xFF, 0xFF, 0xFF, 0xE7, 0xE7, 0xC3, 0xC3,
    0xC3, 0xC3, 0xE7, 0xE7, 0xFF, 0xFF, 0xFF, 0xFF,
    // Tile 6 (right eye)
    0xFF, 0xFF, 0xFF, 0xFF, 0xE7, 0xE7, 0xC3, 0xC3,
    0xC3, 0xC3, 0xE7, 0xE7, 0xFF, 0xFF, 0xFF, 0xFF,
    // Tile 7
    0xFC, 0xFC, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE,
    0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFC, 0xFC,
    
    // Row 2: Mouth area
    // Tile 8
    0x3F, 0x3F, 0x3F, 0x3F, 0x1F, 0x1F, 0x1F, 0x1F,
    0x1F, 0x1F, 0x0F, 0x0F, 0x0F, 0x0F, 0x07, 0x07,
    // Tile 9 (left mouth)
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x80, 0x80,
    0x80, 0x80, 0xC0, 0xC0, 0xE0, 0xE0, 0xF0, 0xF0,
    // Tile 10 (right mouth)
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x01,
    0x01, 0x01, 0x03, 0x03, 0x07, 0x07, 0x0F, 0x0F,
    // Tile 11
    0xFC, 0xFC, 0xFC, 0xFC, 0xF8, 0xF8, 0xF8, 0xF8,
    0xF8, 0xF8, 0xF0, 0xF0, 0xF0, 0xF0, 0xE0, 0xE0,
    
    // Row 3: Bottom
    // Tile 12
    0x03, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    // Tile 13
    0xF8, 0xF8, 0xFC, 0xFC, 0xFE, 0xFE, 0x7F, 0x7F,
    0x3F, 0x3F, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00,
    // Tile 14
    0x1F, 0x1F, 0x3F, 0x3F, 0x7F, 0x7F, 0xFE, 0xFE,
    0xFC, 0xFC, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0x00,
    // Tile 15
    0xC0, 0xC0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

// ============================================================
// HERO SPRITE TILES (16x16 = 4 tiles, 2x2 grid)
// A simple knight/warrior sprite
// ============================================================

const uint8_t hero_tiles[] = {
    // Tile 0 (top-left): Head/helmet left side
    0x00, 0x00, 0x1E, 0x1E, 0x3F, 0x3F, 0x3F, 0x3F,
    0x3F, 0x21, 0x3F, 0x21, 0x1F, 0x1F, 0x0F, 0x0F,
    // Tile 1 (top-right): Head/helmet right side
    0x00, 0x00, 0x78, 0x78, 0xFC, 0xFC, 0xFC, 0xFC,
    0xFC, 0x84, 0xFC, 0x84, 0xF8, 0xF8, 0xF0, 0xF0,
    // Tile 2 (bottom-left): Body/sword left
    0x1F, 0x1F, 0x0F, 0x0F, 0x1F, 0x1F, 0x3B, 0x3B,
    0x71, 0x71, 0x21, 0x21, 0x63, 0x63, 0x00, 0x00,
    // Tile 3 (bottom-right): Body/shield right
    0xFC, 0xFC, 0xFE, 0xFE, 0xFE, 0xFE, 0xDC, 0xDC,
    0x8E, 0x8E, 0x84, 0x84, 0xC6, 0xC6, 0x00, 0x00
};

// ============================================================
// INITIALIZATION
// ============================================================

/**
 * @brief   Load all tile data into VRAM
 */
void sprites_init(void) {
    // Load background tiles
    set_bkg_data(TILE_EMPTY, 1, empty_tile);
    set_bkg_data(TILE_BORDER_TL, 1, border_tl_tile);
    set_bkg_data(TILE_BORDER_T, 1, border_t_tile);
    set_bkg_data(TILE_BORDER_TR, 1, border_tr_tile);
    set_bkg_data(TILE_BORDER_L, 1, border_l_tile);
    set_bkg_data(TILE_BORDER_R, 1, border_r_tile);
    set_bkg_data(TILE_BORDER_BL, 1, border_bl_tile);
    set_bkg_data(TILE_BORDER_B, 1, border_b_tile);
    set_bkg_data(TILE_BORDER_BR, 1, border_br_tile);
    set_bkg_data(TILE_FILL, 1, fill_tile);
    
    // Load digit tiles (10 tiles)
    set_bkg_data(TILE_DIGIT_0, 10, digit_tiles);
    
    // Load letter tiles (26 tiles)
    set_bkg_data(TILE_A, 26, letter_tiles);
    
    // Load special character tiles
    set_bkg_data(TILE_COLON, 1, colon_tile);
    set_bkg_data(TILE_SLASH, 1, slash_tile);
    set_bkg_data(TILE_ARROW, 1, arrow_tile);
    set_bkg_data(TILE_HP_FULL, 1, hp_full_tile);
    set_bkg_data(TILE_HP_EMPTY, 1, hp_empty_tile);
    set_bkg_data(TILE_MP_FULL, 1, mp_full_tile);
    set_bkg_data(TILE_MP_EMPTY, 1, mp_empty_tile);
    set_bkg_data(TILE_EXCLAM, 1, exclam_tile);
    
    // Load monster tiles (16 tiles for 32x32)
    set_bkg_data(TILE_MONSTER_START, 16, monster_tiles);
    
    // Load hero sprite tiles into sprite VRAM
    set_sprite_data(0, 4, hero_tiles);
}
