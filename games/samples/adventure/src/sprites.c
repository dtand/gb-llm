/**
 * @file    sprites.c
 * @brief   Sprite and tile data for Top-Down Adventure
 * @game    adventure
 */

#include <gb/gb.h>
#include <stdint.h>
#include "sprites.h"

// ============================================================
// SPRITE DATA (8x8)
// ============================================================

/** Player character - simple person shape */
const uint8_t player_sprite[] = {
    0x3C, 0x3C,  // ..XXXX..
    0x42, 0x7E,  // .X....X.
    0x5A, 0x7E,  // .X.XX.X.
    0x42, 0x7E,  // .X....X.
    0x3C, 0x3C,  // ..XXXX..
    0x18, 0x18,  // ...XX...
    0x3C, 0x3C,  // ..XXXX..
    0x24, 0x24   // ..X..X..
};

/** NPC character - different person */
const uint8_t npc_sprite[] = {
    0x3C, 0x3C,  // ..XXXX..
    0x42, 0x7E,  // .X....X.
    0x4A, 0x7E,  // .X.X.X.
    0x42, 0x7E,  // .X....X.
    0x3C, 0x3C,  // ..XXXX..
    0x7E, 0x7E,  // .XXXXXX.
    0x18, 0x18,  // ...XX...
    0x66, 0x66   // .XX..XX.
};

// ============================================================
// BACKGROUND TILES (8x8)
// ============================================================

/** Floor - empty/light */
const uint8_t floor_tile[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

/** Wall - solid brick pattern */
const uint8_t wall_tile[] = {
    0xFF, 0xFF, 0x81, 0xFF, 0x81, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0x18, 0xFF, 0x18, 0xFF, 0xFF, 0xFF
};

/** Tree - simple tree shape */
const uint8_t tree_tile[] = {
    0x18, 0x18, 0x3C, 0x3C, 0x7E, 0x7E, 0xFF, 0xFF,
    0xFF, 0xFF, 0x7E, 0x7E, 0x18, 0x18, 0x18, 0x18
};

/** Path - dotted pattern */
const uint8_t path_tile[] = {
    0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x88, 0x00,
    0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x88, 0x00
};

/** Door - door shape */
const uint8_t door_tile[] = {
    0xFF, 0xFF, 0xC3, 0xFF, 0xC3, 0xFF, 0xC3, 0xFF,
    0xC3, 0xF3, 0xC3, 0xFF, 0xC3, 0xFF, 0xFF, 0xFF
};

/** Dialog background - solid light */
const uint8_t dialog_tile[] = {
    0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00,
    0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00
};

/** Dialog border - nice frame */
const uint8_t dialog_border_tile[] = {
    0xFF, 0xFF, 0x80, 0xFF, 0x80, 0xFF, 0x80, 0xFF,
    0x80, 0xFF, 0x80, 0xFF, 0x80, 0xFF, 0xFF, 0xFF
};

// Simple 8x8 font tiles for HELLO!
const uint8_t tile_H[] = {
    0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x7E, 0x7E,
    0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00
};

const uint8_t tile_E[] = {
    0x00, 0x00, 0x7E, 0x7E, 0x60, 0x60, 0x7C, 0x7C,
    0x60, 0x60, 0x60, 0x60, 0x7E, 0x7E, 0x00, 0x00
};

const uint8_t tile_L[] = {
    0x00, 0x00, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60,
    0x60, 0x60, 0x60, 0x60, 0x7E, 0x7E, 0x00, 0x00
};

const uint8_t tile_O[] = {
    0x00, 0x00, 0x3C, 0x3C, 0x66, 0x66, 0x66, 0x66,
    0x66, 0x66, 0x66, 0x66, 0x3C, 0x3C, 0x00, 0x00
};

const uint8_t tile_exclaim[] = {
    0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
    0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00
};

// ============================================================
// INITIALIZATION
// ============================================================

/**
 * @brief   Initialize all sprites and background tiles
 */
void sprites_init(void) {
    // Load background tiles
    set_bkg_data(BG_FLOOR, 1, floor_tile);
    set_bkg_data(BG_WALL, 1, wall_tile);
    set_bkg_data(BG_TREE, 1, tree_tile);
    set_bkg_data(BG_PATH, 1, path_tile);
    set_bkg_data(BG_DOOR, 1, door_tile);
    set_bkg_data(BG_DIALOG, 1, dialog_tile);
    set_bkg_data(BG_DIALOG_BORDER, 1, dialog_border_tile);
    
    // Load letter tiles
    set_bkg_data(BG_H, 1, tile_H);
    set_bkg_data(BG_E, 1, tile_E);
    set_bkg_data(BG_L, 1, tile_L);
    set_bkg_data(BG_O, 1, tile_O);
    set_bkg_data(BG_EXCLAIM, 1, tile_exclaim);
    
    // Load sprite tiles
    set_sprite_data(0, 1, player_sprite);
    set_sprite_data(1, 1, npc_sprite);
    
    // Setup player sprite
    set_sprite_tile(0, 0);
    
    // Setup NPC sprite
    set_sprite_tile(1, 1);
}
